<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sihl (sihl.Sihl)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">sihl</a> &#x00BB; Sihl</nav><h1>Module <code>Sihl</code></h1><p>Sihl is a high-level web application framework providing a set of composable building blocks and recipes that allow you to develop web apps quickly and sustainably. Statically typed functional programming with OCaml makes web development fun and safe.</p><p>Things like database migrations, HTTP routing, user management, sessions, logging, emailing, job queues and schedules are just a few of the topics Sihl takes care of.</p><p>Let's have a look at a tiny Sihl app in a file called <code>sihl.ml</code>:</p><pre><code class="ml">module Service = struct
  module Random = Sihl.Utils.Random.Service
  module Log = Sihl.Log.Service
  module Config = Sihl.Config.Service
  module Db = Sihl.Data.Db.Service
  module MigrationRepo = Sihl.Data.Migration.Service.Repo.MariaDb
  module Cmd = Sihl.Cmd.Service
  module Migration = Sihl.Data.Migration.Service.Make (Cmd) (Db) (MigrationRepo)
  module WebServer = Sihl.Web.Server.Service.Make (Cmd)
  module Schedule = Sihl.Schedule.Service.Make (Log)
end

let services : (module Sihl.Core.Container.SERVICE) list =
  [ (module Service.WebServer) ]

let hello_page =
  Sihl.Web.Route.get &quot;/hello/&quot; (fun _ -&gt;
      Sihl.Web.Res.(html |&gt; set_body &quot;Hello!&quot;) |&gt; Lwt.return)

let routes = [ (&quot;/page&quot;, [ hello_page ], []) ]

module App = Sihl.App.Make (Service)

let _ = App.(empty |&gt; with_services services |&gt; with_routes routes |&gt; run)</code></pre><nav class="toc"><ul><li><a href="#core">Core</a></li><li><a href="#sihl-app">Sihl App</a></li><li><a href="#utils-&amp;-helpers">Utils &amp; Helpers</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#logging">Logging</a></li><li><a href="#data">Data</a></li><li><a href="#web">Web</a></li><li><a href="#cli-command">CLI Command</a></li><li><a href="#scheduler">Scheduler</a></li><li><a href="#authorization">Authorization</a></li><li><a href="#token">Token</a></li><li><a href="#authentication">Authentication</a></li><li><a href="#emailing">Emailing</a></li><li><a href="#session">Session</a></li><li><a href="#message">Message</a></li><li><a href="#storage">Storage</a></li><li><a href="#user-management">User Management</a></li><li><a href="#job-queue">Job Queue</a></li></ul></nav></header><section><header><h2 id="core"><a href="#core" class="anchor"></a>Core</h2></header><div class="spec module" id="module-Core"><a href="#module-Core" class="anchor"></a><code><span class="keyword">module</span> Core = <a href="../Core/index.html">Core</a></code></div></section><section><header><h2 id="sihl-app"><a href="#sihl-app" class="anchor"></a>Sihl App</h2></header><div class="spec module" id="module-App"><a href="#module-App" class="anchor"></a><code><span class="keyword">module</span> App = <a href="../App/index.html">App</a></code></div></section><section><header><h2 id="utils-&amp;-helpers"><a href="#utils-&amp;-helpers" class="anchor"></a>Utils &amp; Helpers</h2></header><div class="spec module" id="module-Utils"><a href="#module-Utils" class="anchor"></a><code><span class="keyword">module</span> Utils = <a href="../Utils/index.html">Utils</a></code></div></section><section><header><h2 id="configuration"><a href="#configuration" class="anchor"></a>Configuration</h2></header><div class="spec module" id="module-Config"><a href="#module-Config" class="anchor"></a><code><span class="keyword">module</span> Config = <a href="../Configuration/index.html">Configuration</a></code></div></section><section><header><h2 id="logging"><a href="#logging" class="anchor"></a>Logging</h2></header><div class="spec module" id="module-Log"><a href="#module-Log" class="anchor"></a><code><span class="keyword">module</span> Log = <a href="../Log/index.html">Log</a></code></div></section><section><header><h2 id="data"><a href="#data" class="anchor"></a>Data</h2></header><div class="spec module" id="module-Data"><a href="#module-Data" class="anchor"></a><code><span class="keyword">module</span> Data = <a href="../Data/index.html">Data</a></code></div></section><section><header><h2 id="web"><a href="#web" class="anchor"></a>Web</h2></header><div class="spec module" id="module-Web"><a href="#module-Web" class="anchor"></a><code><span class="keyword">module</span> Web = <a href="../Web/index.html">Web</a></code></div></section><section><header><h2 id="cli-command"><a href="#cli-command" class="anchor"></a>CLI Command</h2></header><div class="spec module" id="module-Cmd"><a href="#module-Cmd" class="anchor"></a><code><span class="keyword">module</span> Cmd = <a href="../Cmd/index.html">Cmd</a></code></div></section><section><header><h2 id="scheduler"><a href="#scheduler" class="anchor"></a>Scheduler</h2></header><div class="spec module" id="module-Schedule"><a href="#module-Schedule" class="anchor"></a><code><span class="keyword">module</span> Schedule = <a href="../Schedule/index.html">Schedule</a></code></div></section><section><header><h2 id="authorization"><a href="#authorization" class="anchor"></a>Authorization</h2></header><div class="spec module" id="module-Authz"><a href="#module-Authz" class="anchor"></a><code><span class="keyword">module</span> Authz = <a href="../Authz/index.html">Authz</a></code></div></section><section><header><h2 id="token"><a href="#token" class="anchor"></a>Token</h2></header><div class="spec module" id="module-Token"><a href="#module-Token" class="anchor"></a><code><span class="keyword">module</span> Token = <a href="../Token/index.html">Token</a></code></div></section><section><header><h2 id="authentication"><a href="#authentication" class="anchor"></a>Authentication</h2></header><div class="spec module" id="module-Authn"><a href="#module-Authn" class="anchor"></a><code><span class="keyword">module</span> Authn = <a href="../Authn/index.html">Authn</a></code></div></section><section><header><h2 id="emailing"><a href="#emailing" class="anchor"></a>Emailing</h2></header><div class="spec module" id="module-Email"><a href="#module-Email" class="anchor"></a><code><span class="keyword">module</span> Email = <a href="../Email/index.html">Email</a></code></div></section><section><header><h2 id="session"><a href="#session" class="anchor"></a>Session</h2></header><div class="spec module" id="module-Session"><a href="#module-Session" class="anchor"></a><code><span class="keyword">module</span> Session = <a href="../Session/index.html">Session</a></code></div></section><section><header><h2 id="message"><a href="#message" class="anchor"></a>Message</h2></header><div class="spec module" id="module-Message"><a href="#module-Message" class="anchor"></a><code><span class="keyword">module</span> Message = <a href="../Message/index.html">Message</a></code></div></section><section><header><h2 id="storage"><a href="#storage" class="anchor"></a>Storage</h2></header><div class="spec module" id="module-Storage"><a href="#module-Storage" class="anchor"></a><code><span class="keyword">module</span> Storage = <a href="../Storage/index.html">Storage</a></code></div></section><section><header><h2 id="user-management"><a href="#user-management" class="anchor"></a>User Management</h2></header><div class="spec module" id="module-User"><a href="#module-User" class="anchor"></a><code><span class="keyword">module</span> User = <a href="../User/index.html">User</a></code></div></section><section><header><h2 id="job-queue"><a href="#job-queue" class="anchor"></a>Job Queue</h2></header><div class="spec module" id="module-Queue"><a href="#module-Queue" class="anchor"></a><code><span class="keyword">module</span> Queue = <a href="../Queue/index.html">Queue</a></code></div></section></div></body></html>